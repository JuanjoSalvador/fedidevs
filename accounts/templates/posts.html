{% extends "layout.html" %}
{% load account_extras %}
{% load static %}
{% block head %}
  {% if accounts.has_previous %}<meta name="robots" content="none">{% endif %}
{% endblock %}
{% block content %}
  <header style="text-align:center;">
    <h1 class="logo">
      <img src="{% static 'logo.png' %}" alt="logo">
      FEDIDEVS
    </h1>
    <h2>Discover {{ adjectives|random }} posts on Mastodon üåê</h2>
    <p>
      Read <a href="{% url 'faq' %}">the FAQ</a> to see how to get listed. <a target="_blank" href="https://anze3db.ck.page/76db70f6e0 ">Subscribe to the newsletter</a> for updates. Suggest new features on <a href="https://fosstodon.org/@anze3db">Mastodon</a> or <a href="mailto:hello@fedidevs.com">Email</a>!
    </p>
  </header>
  <article>
    <nav>
      <ul style="flex-wrap: wrap; justify-content: center;">
        {% for language in languages %}
          <li>
            <a href="{% if selected_lang.code != language.code %}{% url language.post_code %}{% else %}{% url "posts" %}{% endif %}?q={{ query }}&o={{ order }}"
               class="{% if selected_lang.code != language.code %}outline{% endif %} "
               role="button">
              <img src="{% static language.image %}"
                   alt="{{ language.code }}"
                   class="emojione"
                   height="16"
                   width="16" />
            {{ language.name }}</a>
          </li>
        {% endfor %}
      </ul>
    </nav>
    <section data-nosnippet>
      {% for post in posts %}
        {{ post.content|safe }}
        ‚ù§Ô∏è {{ post.favourites_count }} | üîÑ {{ post.reblogs_count }} | üó®Ô∏è {{ post.replies_count }}
        <a href="{{ post.uri }}">link</a>
        <span>{{ post.created_at }}</span>
        <p>
          {% for language in post.account.languages %}
            <a href="{% url language.post_code %}?q={{ query }}&o={{ order }}"
               style="display:inline-block;
                      white-space: nowrap">
              <img src="{% static language.image %}"
                   alt="{{ language.code }}"
                   class="emojione"
                   height="8"
                   width="8" />
              <small>{{ language.name }}</small>
            </a>
          {% endfor %}
        </p>
        <hr>
      {% endfor %}
      {% if not posts %}
        <p style="text-align:center;">
          No results, <a href="{% url "index" %}">try clearing your search</a>!
        </p>
      {% endif %}
    </section>
    <footer>
      <div class="pagination">
        <span class="step-links">
          {% if accounts.has_previous %}
            <a href="?page={{ accounts.previous_page_number }}&q={{ query }}&o={{ order }}">&laquo; previous</a>
          {% endif %}
          {% if accounts %}
            <span class="current">Page {{ accounts.number }} of {{ accounts.paginator.num_pages }}</span>
          {% endif %}
          {% if accounts.has_next %}
            <a href="?page={{ accounts.next_page_number }}&q={{ query }}&o={{ order }}">next &raquo;</a>
          {% endif %}
        </span>
      </div>
      <p style="text-align:center">
        <small>Don't see yourself on the list? Read through <a href="{% url 'faq' %}">the FAQ</a> to make sure you're eligible to be listed.</small>
      </p>
    </footer>
  </article>
{% endblock %}
